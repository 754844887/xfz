function MaskWrapper(){this.maskWrapper=$(".mask-wrapper"),this.sigin=$("#sigin"),this.signup=$("#signup"),this.close=$("#close"),this.scrollWrapper=$(".scroll-wrapper"),this.switch=$(".switch")}MaskWrapper.prototype.GetValidImg=function(){var i=$(".img-captcha");i.click(function(){i.attr("src","/account/get_valid_img/?random="+Math.random())})},MaskWrapper.prototype.showError=function(i){if(200==i.code)this.maskWrapper.hide(),window.location.reload();else{var s=i.message;if("string"==typeof s||s.constructor==String)window.messageBox.show(s);else for(var n in s){var r=s[n][0];window.messageBox.show(r)}}},MaskWrapper.prototype.listenShow=function(){var i=this;i.sigin.click(function(){i.scrollWrapper.css({left:"0"}),i.maskWrapper.show()}),i.signup.click(function(){i.scrollWrapper.css({left:"-400px"}),i.maskWrapper.show()})},MaskWrapper.prototype.listenHide=function(){var i=this;i.close.click(function(){i.maskWrapper.hide()})},MaskWrapper.prototype.Switch=function(){var s=this;s.switch.click(function(){var i=s.scrollWrapper.css("left");(i=parseInt(i))<0?s.scrollWrapper.animate({left:"0"}):s.scrollWrapper.animate({left:"-400px"})})},MaskWrapper.prototype.listenLogin=function(){var r=this,i=$(".sigin-group"),t=i.find("input[name='telephone']"),e=i.find("input[name='password']"),a=i.find("input[name='remember']");$(".submit-siginbtn").click(function(){var i=t.val(),s=e.val(),n=a.prop("checked");myajax.post({url:"/account/login/",data:{telephone:i,password:s,remember:n?1:0},success:function(i){r.showError(i)},error:function(i){window.messageBox.show("服务器内部错误！")}})})},MaskWrapper.prototype.listenSignup=function(){var e=this,i=$(".sigup-group"),a=i.find("input[name='telephone']"),o=i.find("input[name='username']"),p=i.find("input[name='img_captcha']"),c=i.find("input[name='password1']"),l=i.find("input[name='password2']");$(".submit-signupbtn").click(function(){var i=a.val(),s=o.val(),n=p.val(),r=c.val(),t=l.val();myajax.post({url:"/account/signup/",data:{telephone:i,username:s,img_captcha:n,password1:r,password2:t},success:function(i){e.showError(i)},error:function(i){window.messageBox.show("服务器内部错误！")}})})},MaskWrapper.prototype.run=function(){this.listenShow(),this.listenHide(),this.Switch(),this.listenLogin(),this.GetValidImg(),this.listenSignup()},$(function(){(new MaskWrapper).run()});