function NewsCategory(){this.BtnAdd=$("#category-add-btn")}NewsCategory.prototype.showError=function(t){if(200==t.code)args={title:"添加成功！",text:"",type:"success"},swal(args,function(){window.location.reload()});else{var e=t.message;sweetAlert("出错了！",e,"error")}},NewsCategory.prototype.addCategory=function(){var e=this;e.BtnAdd.click(function(){swal.setDefaults({confirmButtonText:"确认"}),swal({title:"分类名",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"请输入分类名",cancelButtonText:"取消"},function(t){return!1!==t&&(""===t?(swal.showInputError("分类名不能为空"),!1):void myajax.post({url:"/cms/add_category/",data:{category:t},success:function(t){e.showError(t)},error:function(){sweetAlert("出错了！","服务器内部错误","error")}}))})})},NewsCategory.prototype.editCategory=function(){var r=this;$(".edit-btn").click(function(){var t=$(this),e=t.parent().parent().data("pk"),o=t.parent().parent().data("name");swal({title:"分类名",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"请输入分类名！",inputValue:o,cancelButtonText:"取消"},function(t){return!1!==t&&(""===t?(swal.showInputError("分类名不能为空"),!1):void myajax.post({url:"/cms/edit_category/",data:{pk:e,category:t},success:function(t){r.showError(t)},error:function(){sweetAlert("出错了！","服务器内部错误","error")}}))})})},NewsCategory.prototype.delCategory=function(){$(".del-btn").click(function(){var t=$(this),e=t.parent().parent().data("pk"),o=t.parent().parent().data("name");swal({title:"确定删除"+o+"分类吗？",text:"你将无法恢复该信息！",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确定删除！",cancelButtonText:"取消删除！",closeOnConfirm:!1,closeOnCancel:!1},function(t){t?myajax.post({url:"/cms/del_category/",data:{pk:e},success:function(t){if(200==t.code)window.location.reload();else{var e=t.message;sweetAlert("出错了！",e,"error")}},error:function(){sweetAlert("出错了！","服务器内部错误","error")}}):window.location.reload()})})},NewsCategory.prototype.run=function(){this.addCategory(),this.editCategory(),this.delCategory()},$(function(){(new NewsCategory).run()});