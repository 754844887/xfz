function WriteNews(){}WriteNews.prototype.initUeditor=function(){window.ue=UE.getEditor("container",{initialFrameHeight:400,serverUrl:"/controller/"})},WriteNews.prototype.listenUploadEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),myajax.post({url:"/cms/upload/",data:e,processData:!1,contentType:!1,success:function(t){if(200==t.code){var e=t.data.url;$("#thumbnail").val(e)}}})})},WriteNews.prototype.writeNewsEvent=function(){$("#submin-btn").click(function(t){t.preventDefault();var e=$(this),n=$("input[name='title']").val(),i=$("input[name='desc']").val(),o=$("input[name='thumbnail']").val(),a=window.ue.getContent(),r=$("select[name='category']").val(),s=e.attr("data-news-id"),c="";c=s?"/cms/edit_news/":"/cms/write_news/",myajax.post({url:c,data:{title:n,desc:i,thumbnail:o,content:a,category:r,news_id:s},success:function(t){if(200===t.code)args={title:"新闻发布成功！",text:"",type:"success"},swal(args,function(){window.location.reload()});else{var e=t.message;if("string"==typeof e||e.constructor==String)window.messageBox.showError(e);else for(var n in e){var i=e[n][0];window.messageBox.showError(i)}}}})})},WriteNews.prototype.run=function(){this.listenUploadEvent(),this.initUeditor(),this.writeNewsEvent()},$(function(){(new WriteNews).run()});